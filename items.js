var Sword = new Class({
	Extends: Mob
	,initialize: function(ancestor) {
		this.ancestor = ancestor;
		//this.parent(ancestor.x, ancestor.y);
		this.x = ancestor.x;
		this.y = ancestor.y;
		this.msShown = 200;
		this.lastUpdateTime = 0;
		this.acDelta = 0;
		this.frames = {
			left: [12]
			,right: [13]
			,up: [14]
			,down: [15]
		};
		switch(this.ancestor.direction) {
			case 'left':
				this.x -= 11;
				break;
			case 'right':
				this.x += 11;
				break;
			case 'up':
				this.y -= 11;
				break;
			case 'down':
				this.y += 11;
				break;
		}
	}
	,draw: function() {
		xAdd = 0;
		var delta = (this.lastUpdateTime > 0 ? Date.now() - this.lastUpdateTime : 0);
		if(this.acDelta > this.msShown) {
			this.ancestor.usingItem = false;
		} else if (this.acDelta > this.msShown/2) {
			//@TODO: Link should animate when subtracting the sword (walking frames from right to left)

		}
		frame = this.frames[this.ancestor.direction];
		ctx.drawImage(img, (frame*16), 0,16, 16, this.x+xAdd, this.y, 16, 16);
		
		this.acDelta+=delta;
		this.lastUpdateTime = Date.now();
	}	
});

var rooms = [
	 [] // level 0
	,[]	// level 1
	,[]	// level 2
	,[]	// level 3
	,[]	// level 4
	,[]	// level 5
	,[	// level 6
		 []	// level 6, room 0
		,[]	// level 6, room 1
		,[]	// level 6, room 2
		,[]	// level 6, room 3
		,[]	// level 6, room 4
		,[	// level 6, room 5
			 [16,16,-1,-1,-1,36,36,-1,-1,-1,16,-1,16,-1,16,16]
			,[16,18,-1,-1,-1,36,36,-1,-1,-1,16,-1,16,-1,17,16]
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,-1,-1,-1,-1,-1,-1] // All blocks on his line (36 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,34,-1,-1,-1,-1,-1] // All blocks on his line (36 & 34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,-1,-1,34,-1,-1,-1] // All blocks on his line (36 & 34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,49,49,-1,-1,-1,34,-1,-1,-1,-1,-1] // All blocks on his line (49 & 34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,-1,-1,34,-1,-1,-1] // All blocks on his line (36 & 34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,34,-1,-1,-1,-1,-1] // All blocks on his line (36 & 34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,36,36,-1,-1,-1,-1,-1,-1,-1,-1,-1] // All blocks on his line (36 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[19,19,19,20,-1,36,36,19,19,19,19,19,19,19,19,19]
			,[16,16,16,16,-1,36,36,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 6, room 6
			 [16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
			,[16,16,16,16,16,16,16,43,16,16,16,16,16,16,16,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,17,16]
			,[-1,-1,-1,34,34,34,34,-1,-1,-1,-1,-1,-1,-1,-1,17] // Middle blocks (34 should be tinted [0, 168, 0] tinted to [200, 76, 12])
			,[-1,-1,-1,-1,-1,-1,-1,-1,34,34,34,-1,-1,-1,-1,-1]
			,[-1,-1,-1,34,34,34,34,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,-1,-1,34,34,34,-1,-1,-1,-1,-1]
			,[-1,-1,-1,34,34,34,34,-1,-1,-1,-1,-1,-1,-1,-1,35]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,35,16]
			,[19,19,19,19,19,19,19,19,19,19,19,20,-1,-1,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,-1,-1,16,16]
		]
		,[	// level 6, room 7
			 [16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
			,[16,16,16,16,16,16,16,43,16,16,16,16,16,16,16,16] // The hole on this row should not be visible until bombed
			,[16,18,-1,-1,-1,-1,-1,-1,-1,17,18,-1,-1,-1,17,16]
			,[18,-1,-1,34,-1,34,-1,-1,-1,-1,-1,-1,34,-1,-1,17]
			,[]
			,[-1,-1,-1,34,-1,34,-1,-1,-1,-1,-1,-1,34,-1,-1,-1]
			,[]
			,[20,-1,-1,34,-1,34,-1,-1,-1,-1,-1,-1,34,-1,-1,35]
			,[16,20,-1,-1,-1,-1,-1,-1,-1,35,20,-1,-1,-1,35,16]
			,[16,16,19,19,19,19,19,-1,-1,16,16,19,19,19,16,16]
			,[16,16,16,16,16,16,16,-1,-1,16,16,16,16,16,16,16]
		]	
		,[	// level 6, room 8
			 [16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
			,[16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
			,[16,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44]
			,[18,-1,-1,-1,44,-1,-1,-1,-1,44,-1,-1,-1,44,-1,44]
			,[-1,-1,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,-1]
			,[-1,-1,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[20,-1,-1,-1,44,-1,-1,-1,-1,44,-1,-1,-1,44,-1,44]
			,[16,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44]
			,[16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
			,[16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
		]
	]	
	,[
		 [	// level 7, room 0 TODO: All tiles in this room should be tinted [0, 168, 0] tinted to [200, 76, 12]
			 [16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,43,16,16,16,16]
			,[16,16,16,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,16,18,-1,-1,45,46,-1,45,46,-1,-1,-1,-1,-1,-1]
			,[16,18,-1,-1,-1,47,48,-1,47,48,-1,-1,-1,-1,-1,-1]
			,[16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,20,-1,-1,-1,-1,45,46,-1,45,46,-1,-1,-1,-1,-1]
			,[16,16,20,-1,-1,-1,47,48,-1,47,48,-1,-1,-1,-1,-1]
			,[16,16,16,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,16,16,16,19,19,19,19,19,19,19,19,19,19,19,19]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
		 ]
		,[	// level 7, room 1 TODO: All tiles in this room should be tinted [0, 168, 0] tinted to [200, 76, 12]
			 [16,16,16,16,16,16,16,16,16,16,-1,-1,16,16,16,16]
			,[16,16,16,18,17,43,16,16,16,18,-1,-1,17,16,16,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,17,16,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,17,18]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,35,20]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,35,16,16]
			,[19,19,19,19,19,19,19,19,19,19,19,19,19,16,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 7, room 2 TODO: All tiles in this room should be tinted [0, 168, 0] tinted to [200, 76, 12]
			 [44,44,44,44,44,44,-1,-1,44,44,44,44,44,44,44,44]
			,[44,44,44,44,44,44,-1,-1,44,44,44,44,44,44,44,44]
			,[44,44,44,44,44,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
			,[-1,-1,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
			,[-1,-1,-1,-1,-1,-1,44,44,44,44,44,44,44,44,44,44]
			,[-1,-1,-1,-1,-1,-1,44,44,44,44,44,44,44,44,44,44]
			,[44,44,-1,-1,-1,-1,44,44,44,44,44,44,44,44,44,44]
			,[44,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
			,[44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
		]
		,[	// level 7, room 3 TODO: All tiles in this room should be tinted [0, 168, 0] tinted to [200, 76, 12]
			 [44,44,44,44,44,44,44,-1,-1,-1,44,-1,44,-1,44,44]
			,[44,44,44,44,44,44,44,-1,-1,-1,44,-1,44,-1,44,44]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44,44]
			,[44,44,44,44,44,44,44,-1,-1,-1,-1,-1,-1,-1,-1,44]
			,[44,44,44,44,44,44,44,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[44,44,44,44,44,44,44,-1,-1,-1,44,-1,-1,-1,-1,-1]
			,[44,44,44,44,44,44,44,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[44,44,44,44,44,44,44,-1,-1,-1,-1,-1,-1,-1,-1,44]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44,44]
			,[44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
			,[44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
		]
		,[	// level 7, room 4
			 [16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
			,[16,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,17,16]
			,[18,-1,-1,-1,-1,-1,-1,38,39,40,-1,-1,-1,-1,-1,16]
			,[-1,-1,-1,-1,37,-1,37,41,43,42,37,-1,37,-1,-1,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16]
			,[-1,-1,-1,-1,37,-1,37,-1,-1,-1,37,-1,37,-1,-1,16]
			,[20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16]
			,[16,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,35,16]
			,[16,16,19,19,19,19,19,19,19,19,19,19,19,19,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 7, room 5
			 [16,16,16,16,-1,36,36,16,16,16,16,16,16,16,16,16]
			,[16,16,43,18,-1,36,36,17,16,16,16,16,16,16,16,16]
			,[16,18,-1,-1,-1,36,36,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,-1,-1,-1,-1,36,36,-1,34,-1,-1,-1,34,-1,-1,-1]
			,[16,-1,-1,-1,-1,36,36,-1,-1,-1,34,-1,-1,-1,-1,-1]
			,[16,-1,-1,34,-1,36,36,-1,34,-1,-1,-1,34,-1,-1,-1]
			,[16,-1,-1,-1,-1,36,36,-1,-1,-1,34,-1,-1,-1,-1,-1]
			,[16,-1,-1,-1,-1,36,36,-1,34,-1,-1,-1,34,-1,-1,-1]
			,[16,20,-1,-1,-1,36,36,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,16,19,19,20,36,36,35,19,19,19,19,19,19,19,19]
			,[16,16,16,16,16,36,36,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 7, room 6
			 [16,16,16,16,16,16,16,16,16,16,16,16,-1,-1,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,18,-1,-1,16,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,34,-1,-1,-1,-1,-1,17,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,34,-1,-1,-1,-1,17]
			,[-1,-1,34,-1,-1,34,-1,-1,34,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,34,-1,-1,-1,-1,35]
			,[-1,-1,-1,-1,-1,-1,-1,-1,34,-1,-1,-1,-1,-1,35,16]
			,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16,16]
			,[19,19,19,19,19,19,19,19,19,19,19,19,19,19,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 7, room 7 (start)
			 [16,16,16,16,16,16,16,-1,-1,16,16,16,16,16,16,16]
			,[16,16,16,16,43,16,18,-1,-1,16,16,16,16,16,16,16]
			,[16,16,16,18,-1,-1,-1,-1,-1,16,16,16,16,16,16,16]
			,[16,16,18,-1,-1,-1,-1,-1,-1,16,16,16,16,16,16,16]
			,[16,18,-1,-1,-1,-1,-1,-1,-1,17,16,16,16,16,16,16]
			,[]
			,[19,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,19,19]
			,[16,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16,16]
			,[16,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,16,16]
			,[16,16,19,19,19,19,19,19,19,19,19,19,19,19,16,16]
			,[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]
		]
		,[	// level 7, room 8
			 [16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
			,[16,16,44,-1,44,-1,44,-1,-1,44,-1,44,-1,44,-1,44]
			,[16,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,18,-1,-1,-1,-1,44,-1,-1,44,-1,44,-1,44,-1,-1]
			,[18,-1,44,-1,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[-1,-1,-1,-1,-1,-1,44,-1,-1,44,-1,44,-1,44,-1,-1]
			,[20,-1,44,-1,44,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,20,-1,-1,-1,-1,44,-1,-1,44,-1,44,-1,44,-1,-1]
			,[16,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
			,[16,16,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
			,[16,16,44,44,44,44,44,44,44,44,44,44,44,44,44,44]
		]
	]
];

var font = {
	 a: [ 0, 0],b: [ 1, 0],e: [ 2, 0],f: [ 3, 0],i: [ 4, 0],j: [ 5, 0],m: [ 6, 0],n: [ 7, 0],q: [ 8, 0],r: [ 9, 0],u: [10, 0],v: [11, 0],  y: [12, 0],  z: [13, 0],',': [14, 0],'!': [15, 0],'.': [16, 0],0: [17, 0],3: [18, 0],4: [19, 0],7: [20, 0],8: [21, 0]
	,c: [ 0, 1],d: [ 1, 1],g: [ 2, 1],h: [ 3, 1],k: [ 4, 1],l: [ 5, 1],o: [ 6, 1],p: [ 7, 1],s: [ 8, 1],t: [ 9, 1],w: [10, 1],x: [11, 1],'-': [12, 1],'.': [13, 1],"'": [14, 1],'&': [15, 1],  1: [16, 1],2: [17, 1],5: [18, 1],6: [19, 1],9: [20, 1]
};
